html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    link(rel='stylesheet', href='css/styles.css')
    link(rel='stylesheet', href='css/libs/bootstrap.min.css')
    link(href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400,700" rel="stylesheet") 
    title Rompecabeza UX

    
  body
    - var state1 = 'active'
    include ../components/header
    br
    br
    .row
      nav.col-md-2.d-none.d-md-block.bg-light.sidebar
        br
        .nav.flex-column.nav-pills#v-pills-tab(role="tablist", aria-orientation="vertical")
          a.nav-link.active#v-pills-home-tab(href="#input-solo-texto") Solo Texto
          a.nav-link#v-pills-profile-tab(href="#input-solo-numero") Solo número
          a.nav-link#v-pills-messages-tab(href="#input-rango1") Rango min/max (caracteres)
          a.nav-link#v-pills-messages-tab(href="#input-rango2") Rango min/max (valor)
          a.nav-link#v-pills-settings-tab(href="#input-rut") Input rut
          a.nav-link#v-pills-settings-tab(href="#input-email") Input email
          a.nav-link#v-pills-settings-tab(href="#input-moneda") Input moneda (miles y $)
          a.nav-link#v-pills-settings-tab(href="#input-fecha1") Input fecha 1
          a.nav-link#v-pills-settings-tab(href="#input-fecha2") Input fecha 2
          a.nav-link#v-pills-settings-tab(href="#input-fecha3") Input fecha 3
          a.nav-link#v-pills-settings-tab(href="#selectize-autocomplete") Selectize autocomplete/select
          a.nav-link#v-pills-settings-tab(href="#selectize-selectgroup") Selectize select group
          a.nav-link#v-pills-settings-tab(href="#selectize-checkbox") Selectize checkbox
          a.nav-link#v-pills-settings-tab(href="#input-radiobutton") Radiobutton group
          a.nav-link#v-pills-settings-tab(href="#input-checkbox") Checkbox group
          a.nav-link#v-pills-settings-tab(href="#boton") Botón habilitado/deshabilitado
          a.nav-link#v-pills-settings-tab(href="#obligatorio") Campo obligatorio

      .col-md-9.ml-sm-auto.col-lg-10.px-4
        .main-container
          h1 Guía de validaciones de formularios en Jquery
          br
          #input-solo-texto
            h3 Input solo texto
            br
            input(type="text", name="").input-text
            .highlights
              pre.
                $('.input-text').on('input', function () {
                  this.value = this.value.replace(/[^A-Za-z\s]/g, '');
                });
            br
          #input-solo-numero
            h3 Input numérico
            br
            input(type="text", name="").input-number
            .highlights
              pre.
                $('.input-number').on('input', function () {
                  this.value = this.value.replace(/[^0-9]/g, '');
                });
          br
          #input-rango1
            h3 Input rango caracteres (min/max) 
            br
            input(type="text", name="")
            .highlights
              pre.
                $('input#nom_form').attr('maxLength', '30').keypress(limitMe);
                function limitMe(e) {
                    if (e.keyCode == 8) { return true; }
                    return this.value.length < $(this).attr("maxLength");
                }
          br
          #input-rango2
            h3 Input rango valor (min/max) 
            br
            input(type="text", name="")
            .highlights
              pre.
                $('input#nom_form').attr('maxLength', '30').keypress(limitMe);
                function limitMe(e) {
                    if (e.keyCode == 8) { return true; }
                    return this.value.length < $(this).attr("maxLength");
                }
          br
          #input-rut
            h3 Input rut
            br
            input(type="text", name="").input-rut
            #isValidRut
            .highlights
              pre.
                $('.input-rut').on('input', function () {
                  this.value = this.value.replace(/[^kK0-9\_]/g, '');
                  let value = this.value;
                  if (value.length > 1) {
                      value = value.substring(0, value.length - 1) + '-' + value.substring(value.length - 1, value.length);
                  }
                  if (value.length > 5) {
                      value = value.substring(0, value.length - 5) + '.' + value.substring(value.length - 5, value.length);
                  }
                  if (value.length > 9) {
                      value = value.substring(0, value.length - 9) + '.' + value.substring(value.length - 9, value.length);
                  }
                  this.value = value;
                  if (value.length >= 11) {
                      let valor = value.replace(".", "").replace(".", "");
                      //Remueve y agrega texto error
                      Fn.validaRut(valor) ? $("#isValidRut").empty() : $("#isValidRut").append("<&zwj;p>Rut inválido, por favor verifíquelo<&zwj;/p>");
                  }
                });
                let Fn = {
                  validaRut: function (rutCompleto) {
                      if (!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(rutCompleto))
                          return false;
                      let tmp = rutCompleto.split('-');
                      let digv = tmp[1];
                      let rut = tmp[0];
                      if (digv == 'K') digv = 'k';
                      return (Fn.dv(rut) == digv);
                  },
                  dv: function (T) {
                      let M = 0, S = 1;
                      for (; T; T = Math.floor(T / 10))
                          S = (S + T % 10 * (9 - M++ % 6)) % 11;
                      return S ? S - 1 : 'k';
                  }
                }
          br
          #input-email
            h3 Input email
            br
            input(type="text", name="")
            .highlights
              pre.
                function checkRut(rut) {
                    // Despejar Puntos
                    var valor = rut.value.replace('.','');
                    // Despejar Guión
                    valor = valor.replace('-','');
                    
                    
                    // Aislar Cuerpo y Dígito Verificador
                    cuerpo = valor.slice(0,-1);
                    dv = valor.slice(-1).toUpperCase();
                    
                    // Formatear RUN
                    rut.value = cuerpo + '-'+ dv
                    
                    // Si no cumple con el mínimo ej. (n.nnn.nnn)
                    if(cuerpo.length < 7) { 
                        return false;
                    }

                    // Calcular Dígito Verificador
                    suma = 0;
                    multiplo = 2;
                    
                    // Para cada dígito del Cuerpo
                    for(i=1;i<=cuerpo.length;i++) {
                    
                        // Obtener su Producto con el Múltiplo Correspondiente
                        index = multiplo * valor.charAt(cuerpo.length - i);
                        
                        // Sumar al Contador General
                        suma = suma + index;
                        
                        // Consolidar Múltiplo dentro del rango [2,7]
                        if(multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }
                  
                    }
                    
                    // Calcular Dígito Verificador en base al Módulo 11
                    dvEsperado = 11 - (suma % 11);
                    
                    // Casos Especiales (0 y K)
                    dv = (dv == 'K')?10:dv;
                    dv = (dv == 0)?11:dv;
                    
                    // Validar que el Cuerpo coincide con su Dígito Verificador
                    if(dvEsperado != dv) {  return false; }
                    
                    // Si todo sale bien, eliminar errores (decretar que es válido)
                }
          br
          #input-moneda
            h3 Input formato moneda (miles y $)
            br
            input(type="text", name="")
            .highlights
              pre.
                function format(input) {
                  var num = input.value.replace(/\./g, '');
                  if (!isNaN(num)) {
                  num = num.toString().split('').reverse().join('').replace(/(?=\d*\.?)(\d{3})/g, '$1.');
                  num = num.split('').reverse().join('').replace(/^[\.]/, '');
                  input.value = num;
                  } else {
                  alert('Solo se permiten numeros');
                  input.value = input.value.replace(/[^\d\.]*/g, '');
                  }
                }
          br
          #input-fecha1
            h3 Input fecha 1 (tres campos)
            br
            input(type="text", name="")
            input(type="text", name="")
            input(type="text", name="")
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #input-fecha2
            h3 Input fecha 2 (formateada 01/08/2018)
            br
            input(type="text", name="").input-date
            #isValidDate
            .highlights
              pre.
                $('.input-date').on('input', function () {
                    this.value = this.value.replace(/[^0-9\_]/g, '');
                    let value = this.value;
                    if (value.length > 4) {
                        value = value.substring(0, value.length - 4) + '/' + value.substring(value.length - 4, value.length);
                    }
                    if (value.length > 7) {
                        value = value.substring(0, value.length - 7) + '/' + value.substring(value.length - 7, value.length);
                    }
                    this.value = value;
                    if (value.length > 9) {
                        //Remueve y agrega texto de error
                        birth(value) ? $( "#isValidDate" ).empty() : $("#isValidDate").append( "<&zwj;p>Fecha inválida, por favor verifíquela<&zwj;/p> );
                    }
                });
                function birth(dateString) {
                    if (!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(dateString))
                        return false;
                    var parts = dateString.split("/");
                    var month = parseInt(parts[1], 10);
                    var day = parseInt(parts[0], 10);
                    var year = parseInt(parts[2], 10);

                    if (year < 1900 || year > 2020 || month == 0 || month > 12)
                        return false;

                    var monthLength = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

                    if (year % 400 == 0 || (year % 100 != 0 && year % 4 == 0))
                        monthLength[1] = 29;

                    return day > 0 && day <= monthLength[month - 1];
                };
          br
          #input-fecha3
            h3 Input fecha 3 (datepicker)
            br
            input(type="text", name="")
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #selectize-autocomplete
            h3 Selectize Autocomplete/Select
            br
            input(type="text", name="")
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #selectize-selectgroup
            h3 Selectize select group
            br
            input(type="text", name="")
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #selectize-checkbox
            h3 Selectize checkbox
            br
            input(type="text", name="")
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #input-radiobutton
            h3 Radiobutton group
            br
            .form-check
              input#exampleRadios1.form-check-input(type="radio", name="exampleRadios", value="option1", checked="")
              |   
              label.form-check-label(for="exampleRadios1")
                | Default radio
              br   
              input#exampleRadios2.form-check-input(type="radio", name="exampleRadios", value="option1", checked="")
              |   
              label.form-check-label(for="exampleRadios2")
                | Default radio
              br   
              input#exampleRadios3.form-check-input(type="radio", name="exampleRadios", value="option1", checked="")
              |   
              label.form-check-label(for="exampleRadios3")
                | Default radio
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #input-checkbox
            h3 Checkbox group
            br
            .form-check
              input#defaultCheck1.form-check-input(type="checkbox", value="")
              |   
              label.form-check-label(for="defaultCheck1")
                | Default checkbox
              br 
              input#defaultCheck2.form-check-input(type="checkbox", value="")
              |   
              label.form-check-label(for="defaultCheck2")
                | Default checkbox
              br
              input#defaultCheck3.form-check-input(type="checkbox", value="")
              | 
              label.form-check-label(for="defaultCheck3")
                | Default checkbox
            .highlights
              pre.
                function validar()
                {
                    var contenido=document.getElementById('mail').value;
                    var conte=contenido.split("@");
                    if(!conte[1] || conte[0]=="")
                    {
                      alert('no es correo valido(1)');
                    }
                    else
                    {
                      var cont1=conte[0].split(".");
                      var cont2=conte[1].split(".");
                      if(!cont1[1])
                      {
                        alert('no es correo valido(2)');
                      }
                      else if(!cont2[1])
                      {
                        alert('no es correo valido(3)');
                      }
                    }
                }
          br
          #boton
            h3 Botón activo y deshabilitado
            br
            button(type="button" class="btn btn-primary") Enviar
            .highlights
              p
                pre.
                  $(".item-pass &gt; :input").keyup(function() {
                    var $emptyFields = $('.item-pass &gt; :input').filter(function() {
                      return $.trim(this.value) === "";
                    });

                    if (!$emptyFields.length) {
                      $('.btn.redDisable').removeClass('redDisable').addClass('red');
                      $('.btn.whiteDisable').removeClass('whiteDisable').addClass('white');
                    }
                  });
          br
          #obligatorio
            h3 Input obligatorio
            br
            input(type="text", name="")
            .highlights
              pre.
                $(".date1").keypress(function() {
                  if ($(".date1") == '') {
                      $('.date1').addClass("rut-error");
                  } else {
                      $(".date1").removeClass("rut-error");
                  }
                });
          br
           
        script(src="js/libs/jquery-3.3.1.min.js")
        script(src="js/libs/bootstrap.min.js")
        script(src="js/libs/highlight.js")
        script(src="js/funciones.js")
  


   
    

